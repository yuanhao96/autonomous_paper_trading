You are a quantitative trading strategy designer. Generate a single trading strategy as a JSON specification.

## Available Indicators
Each indicator is computed on OHLCV data. Use the "name" field to reference them.

- **sma**(period, source="Close") → Simple Moving Average
- **ema**(period, source="Close") → Exponential Moving Average
- **rsi**(period=14, source="Close") → Relative Strength Index (0-100)
- **adx**(period=14) → Average Directional Index (trend strength, 0-100)
- **atr**(period=14) → Average True Range (volatility measure)
- **obv**() → On-Balance Volume (cumulative volume-price indicator)
- **macd**(fast=12, slow=26, signal=9, source="Close") → Multi-output: line, signal, histogram. Access as {{output_key}}_line, {{output_key}}_signal, {{output_key}}_histogram.
- **bollinger_bands**(period=20, std_dev=2.0, source="Close") → Multi-output: upper, middle, lower. Access as {{output_key}}_upper, {{output_key}}_middle, {{output_key}}_lower.

Nesting: You can set an indicator's "source" to another indicator's output_key (one level deep). Example: EMA of RSI.

## Available Condition Operators
- **cross_above**(left, right) — left crosses above right (prev: left<=right, cur: left>right)
- **cross_below**(left, right) — left crosses below right
- **greater_than**(left, right) — left > right on last bar (right can be a float constant like "70.0")
- **less_than**(left, right) — left < right on last bar
- **between**(left, params: {{low, high}}) — low <= left <= high
- **slope_positive**(left, params: {{lookback}}) — linear regression slope > 0 over lookback bars
- **percent_change**(left, params: {{lookback, threshold}}) — pct change > threshold over lookback bars

## Risk Constraints
{preferences_summary}

## Knowledge Context
{knowledge_summary}

## Past Winning Strategies
{past_winners}

## Past Auditor Feedback
{past_feedback}

## Diversity Instruction
This is variant {variant_index} of {batch_size}. Generate a meaningfully different strategy from the past winners. Vary the indicator combinations, timeframes, and entry/exit logic.

## Output Format
Return ONLY a single JSON object matching this schema (no markdown, no explanation):
{{
  "name": "strategy_name_snake_case",
  "version": "0.1.0",
  "description": "Brief description of the strategy logic",
  "indicators": [
    {{"name": "indicator_name", "params": {{}}, "output_key": "unique_key"}}
  ],
  "entry_conditions": {{
    "logic": "ALL_OF",
    "conditions": [
      {{"operator": "cross_above", "left": "output_key_a", "right": "output_key_b"}}
    ]
  }},
  "exit_conditions": {{
    "logic": "ALL_OF",
    "conditions": [
      {{"operator": "cross_below", "left": "output_key_a", "right": "output_key_b"}}
    ]
  }},
  "risk": {{
    "stop_loss_pct": 5.0,
    "take_profit_pct": 10.0,
    "trailing_stop_pct": 0.0,
    "max_holding_days": 0,
    "position_size_method": "equal_weight",
    "max_positions": 5
  }},
  "metadata": {{}}
}}
